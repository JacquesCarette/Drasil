""" Control.jl
    Controls the flow of the program
    - Authors: Thulasi Jegatheesan
    - Note: Generated by Drasil v0.1-alpha
"""

module Control

include("Calculations.jl")
import .Calculations
include("InputParameters.jl")
import .InputParameters
include("OutputFormat.jl")
import .OutputFormat

global filename = ARGS[1]
const pi = 3.14159265;
const L_min = 0.1;
const L_max = 50.0;
const rho_W_min = 950.0;
const rho_W_max = 1000.0;
const A_C_max = 100000.0;
const C_W_min = 4170.0;
const C_W_max = 4210.0;
const h_C_min = 10.0;
const h_C_max = 10000.0;
const t_final_max = 86400.0;
const AR_min = 1.0e-2;
const AR_max = 100.0;
A_C, C_W, h_C, T_init, t_final, L, T_C, t_step, rho_W, D, A_tol, R_tol, E_W = InputParameters.get_input(filename)
V_tank = InputParameters.derived_values(D, L, pi)
InputParameters.input_constraints(A_C, C_W, h_C, T_init, t_final, L, T_C, t_step, rho_W, D, E_W, A_C_max, C_W_min, C_W_max, h_C_min, h_C_max, t_final_max, L_min, L_max, rho_W_min, rho_W_max, AR_min, AR_max)
global V_W = Calculations.func_V_W(V_tank)
global m_W = Calculations.func_m_W(rho_W, V_W)
global tau_W = Calculations.func_tau_W(C_W, h_C, A_C, m_W)
global T_W = Calculations.func_T_W(T_C, T_init, t_final, A_tol, R_tol, t_step, tau_W)
OutputFormat.write_output(E_W, T_W)

end
