<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification,
             ConstraintKinds,
             InstanceSigs,
             TypeOperators,
             TypeApplications,
             FlexibleContexts,
             UndecidableInstances,
             FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Drasil.Database.Chunk</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier">Chunk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#IsChunk"><span class="hs-identifier">IsChunk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier">HasChunkRefs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#mkChunk"><span class="hs-identifier">mkChunk</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- FIXME: mkChunk should not be exported but is temporarily because this module is NOT in `drasil-database`</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#unChunk"><span class="hs-identifier">unChunk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkType"><span class="hs-identifier">chunkType</span></a></span><span>
</span><span id="line-16"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">to</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Getter</span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Proxy</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TypeRep</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">cast</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">typeRep</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Rep</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">from</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">M1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">K1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(:*:)</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(:+:)</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">U1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Generically</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Drasil.Database.UID.html"><span class="hs-identifier">Drasil.Database.UID</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.UID.html#HasUID"><span class="hs-identifier">HasUID</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#UID"><span class="hs-identifier">UID</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="annot"><span class="hs-comment">-- | Constraint for anything that may be considered a valid chunk type.</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">type</span><span> </span><span id="IsChunk"><span class="annot"><a href="Drasil.Database.Chunk.html#IsChunk"><span class="hs-identifier hs-var">IsChunk</span></a></span></span><span> </span><span id="local-6989586621679106376"><span class="annot"><a href="#local-6989586621679106376"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.UID.html#HasUID"><span class="hs-identifier hs-type">HasUID</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106376"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106376"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679106376"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-comment">-- | A piece of reusable knowledge, with an internal identifier ('UID'),</span><span>
</span><span id="line-30"></span><span class="hs-comment">-- possibly dependant on other chunks.</span><span>
</span><span id="line-31"></span><span class="hs-keyword">data</span><span> </span><span id="Chunk"><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679106377"><span class="annot"><a href="#local-6989586621679106377"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#IsChunk"><span class="hs-identifier hs-type">IsChunk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106377"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Chunk"><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679106377"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106381"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="hs-operator hs-type">(==)</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-35"></span><span>  </span><span id="local-6989586621679106396"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679106396"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679106397"><span class="annot"><span class="annottext">== :: Chunk -&gt; Chunk -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679106398"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679106398"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679106396"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Getting UID Chunk UID -&gt; UID
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UID Chunk UID
forall c. HasUID c =&gt; Getter c UID
Getter Chunk UID
</span><a href="Drasil.Database.UID.html#uid"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">UID -&gt; UID -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679106398"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Getting UID Chunk UID -&gt; UID
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UID Chunk UID
forall c. HasUID c =&gt; Getter c UID
Getter Chunk UID
</span><a href="Drasil.Database.UID.html#uid"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#HasUID"><span class="hs-identifier hs-type">HasUID</span></a></span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Drasil.Database.UID.html#uid"><span class="hs-identifier hs-type">uid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getter</span></span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#UID"><span class="hs-identifier hs-type">UID</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span id="local-6989586621679106411"><span class="annot"><span class="annottext">uid :: Getter Chunk UID
</span><a href="Drasil.Database.UID.html#uid"><span class="hs-identifier hs-var hs-var hs-var hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; UID) -&gt; (UID -&gt; f UID) -&gt; Chunk -&gt; f Chunk
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679106417"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106417"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106417"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Getting UID a UID -&gt; UID
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting UID a UID
forall c. HasUID c =&gt; Getter c UID
Getter a UID
</span><a href="Drasil.Database.UID.html#uid"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-type">chunkRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#UID"><span class="hs-identifier hs-type">UID</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span id="local-6989586621679106422"><span class="annot"><span class="annottext">chunkRefs :: Chunk -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679106426"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106426"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Set UID
forall a. HasChunkRefs a =&gt; a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106426"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="annot"><span class="hs-comment">-- | Create a 'Chunk', ensuring that 'Chunk's are never placed within 'Chunk's.</span></span><span>
</span><span id="line-46"></span><span id="local-6989586621679106292"><span class="annot"><a href="Drasil.Database.Chunk.html#mkChunk"><span class="hs-identifier hs-type">mkChunk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#IsChunk"><span class="hs-identifier hs-type">IsChunk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106292"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679106292"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span></span><span>
</span><span id="line-47"></span><span id="mkChunk"><span class="annot"><span class="annottext">mkChunk :: forall a. IsChunk a =&gt; a -&gt; Chunk
</span><a href="Drasil.Database.Chunk.html#mkChunk"><span class="hs-identifier hs-var hs-var">mkChunk</span></a></span></span><span> </span><span id="local-6989586621679106436"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106436"><span class="hs-identifier hs-var">a</span></a></span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep
forall a. Typeable a =&gt; a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106436"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TypeRep -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Proxy Chunk -&gt; TypeRep
forall {k} (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Chunk
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Cannot place a Chunk inside of a Chunk&quot;</span></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Chunk
forall a. IsChunk a =&gt; a -&gt; Chunk
</span><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106436"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><span class="hs-comment">-- | &quot;Open&quot; chunks, casting them to a specific type.</span></span><span>
</span><span id="line-52"></span><span id="local-6989586621679106305"><span class="annot"><a href="Drasil.Database.Chunk.html#unChunk"><span class="hs-identifier hs-type">unChunk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679106305"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679106305"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-53"></span><span id="unChunk"><span class="annot"><span class="annottext">unChunk :: forall a. Typeable a =&gt; Chunk -&gt; Maybe a
</span><a href="Drasil.Database.Chunk.html#unChunk"><span class="hs-identifier hs-var hs-var">unChunk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679106443"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106443"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a b. (Typeable a, Typeable b) =&gt; a -&gt; Maybe b
</span><span class="hs-identifier hs-var">cast</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106443"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="annot"><span class="hs-comment">-- | Ask a 'Chunk' for the type of data it codifies.</span></span><span>
</span><span id="line-56"></span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkType"><span class="hs-identifier hs-type">chunkType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span>
</span><span id="line-57"></span><span id="chunkType"><span class="annot"><span class="annottext">chunkType :: Chunk -&gt; TypeRep
</span><a href="Drasil.Database.Chunk.html#chunkType"><span class="hs-identifier hs-var hs-var">chunkType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679106447"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106447"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep
forall a. Typeable a =&gt; a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106447"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- | The majority of chunks will relate other chunks in some way. In other</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- words, the majority of our chunks *depend* on others. 'HasChunkRefs' is meant</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- as a way to capture what things a chunk *directly* refers to (i.e., depends</span><span>
</span><span id="line-62"></span><span class="hs-comment">-- on directly).</span><span>
</span><span id="line-63"></span><span class="hs-keyword">class</span><span> </span><span id="HasChunkRefs"><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-var">HasChunkRefs</span></a></span></span><span> </span><span id="local-6989586621679106290"><span class="annot"><a href="#local-6989586621679106290"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-64"></span><span>  </span><span id="chunkRefs"><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-type">chunkRefs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679106290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#UID"><span class="hs-identifier hs-type">UID</span></a></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#UID"><span class="hs-identifier hs-type">UID</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-comment">-- | 'UID's are meant to be &quot;owned&quot; (i.e., they are the unique identifier of</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-comment">-- the chunk being defined), not *carried as references to other chunks*.</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-comment">-- 'TypedUIDRef t' exists to be used as a *reference to another chunk of type</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-comment">-- 't'*. Therefore, `UID` has no chunk references.</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621679106450"><span class="annot"><span class="annottext">chunkRefs :: UID -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">UID
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679106454"><span class="annot"><span class="annottext">chunkRefs :: Int -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-79"></span><span>  </span><span id="local-6989586621679106457"><span class="annot"><span class="annottext">chunkRefs :: Integer -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621679106460"><span class="annot"><span class="annottext">chunkRefs :: Double -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>  </span><span id="local-6989586621679106463"><span class="annot"><span class="annottext">chunkRefs :: Bool -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621679106466"><span class="annot"><span class="annottext">chunkRefs :: Char -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-comment">-- NOTE: 'OVERLAPPING' instance here because [Char] is instantiated with</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- `HasChunkRefs [a]`, but very inefficient. We already know the result will be</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- empty.</span><span>
</span><span id="line-97"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621679106469"><span class="annot"><span class="annottext">chunkRefs :: [Char] -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106313"><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106313"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679106313"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-102"></span><span>  </span><span id="local-6989586621679106478"><span class="annot"><span class="annottext">chunkRefs :: [a] -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set UID] -&gt; Set UID
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">S.unions</span></span><span> </span><span class="annot"><span class="annottext">([Set UID] -&gt; Set UID) -&gt; ([a] -&gt; [Set UID]) -&gt; [a] -&gt; Set UID
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Set UID) -&gt; [a] -&gt; [Set UID]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Set UID
forall a. HasChunkRefs a =&gt; a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106322"><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106322"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679106322"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621679106485"><span class="annot"><span class="annottext">chunkRefs :: Maybe a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679106486"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106486"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Set UID
forall a. HasChunkRefs a =&gt; a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106486"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106325"><span id="local-6989586621679106326"><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106325"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106326"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679106325"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106326"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621679106493"><span class="annot"><span class="annottext">chunkRefs :: Either l r -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(l -&gt; Set UID) -&gt; (r -&gt; Set UID) -&gt; Either l r -&gt; Set UID
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">l -&gt; Set UID
forall a. HasChunkRefs a =&gt; a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">r -&gt; Set UID
forall a. HasChunkRefs a =&gt; a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106333"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Generic</span></span><span> </span><span class="annot"><a href="#local-6989586621679106333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Rep</span></span><span> </span><span class="annot"><a href="#local-6989586621679106333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Generically</span></span><span> </span><span class="annot"><a href="#local-6989586621679106333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>  </span><span id="local-6989586621679106501"><span class="annot"><span class="annottext">chunkRefs :: Generically a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">chunkRefs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Generically</span></span><span> </span><span id="local-6989586621679106503"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106503"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rep a Any -&gt; Set UID
forall p. Rep a p -&gt; Set UID
forall (f :: * -&gt; *) p. GHasCRefs f =&gt; f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">(Rep a Any -&gt; Set UID) -&gt; Rep a Any -&gt; Set UID
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Rep a Any
forall x. a -&gt; Rep a x
forall a x. Generic a =&gt; a -&gt; Rep a x
</span><span class="hs-identifier hs-var">from</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679106503"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-pragma hs-type">chunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-keyword">class</span><span> </span><span id="GHasCRefs"><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-var">GHasCRefs</span></a></span></span><span> </span><span id="local-6989586621679106335"><span class="annot"><a href="#local-6989586621679106335"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-119"></span><span>  </span><span id="gChunkRefs"><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-type">gChunkRefs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679106334"><span class="annot"><a href="#local-6989586621679106335"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106334"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Drasil.Database.UID.html#UID"><span class="hs-identifier hs-type">UID</span></a></span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- Meta-information (constructors, selectors): pass through</span><span>
</span><span id="line-122"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106345"><span id="local-6989586621679106346"><span id="local-6989586621679106347"><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106345"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M1</span></span><span> </span><span class="annot"><a href="#local-6989586621679106346"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106347"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106345"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621679106510"><span class="annot"><span class="annottext">gChunkRefs :: forall p. M1 i c f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">gChunkRefs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M1</span></span><span> </span><span id="local-6989586621679106512"><span class="annot"><span class="annottext">f p
</span><a href="#local-6989586621679106512"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f p -&gt; Set UID
forall p. f p -&gt; Set UID
forall (f :: * -&gt; *) p. GHasCRefs f =&gt; f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">f p
</span><a href="#local-6989586621679106512"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-pragma hs-type">gChunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">-- Products: Union</span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106351"><span id="local-6989586621679106352"><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106351"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106352"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679106351"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:*:</span></span><span> </span><span class="annot"><a href="#local-6989586621679106352"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679106520"><span class="annot"><span class="annottext">gChunkRefs :: forall p. (:*:) a b p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">gChunkRefs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679106521"><span class="annot"><span class="annottext">a p
</span><a href="#local-6989586621679106521"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:*:</span></span><span> </span><span id="local-6989586621679106523"><span class="annot"><span class="annottext">b p
</span><a href="#local-6989586621679106523"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a p -&gt; Set UID
forall p. a p -&gt; Set UID
forall (f :: * -&gt; *) p. GHasCRefs f =&gt; f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">a p
</span><a href="#local-6989586621679106521"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set UID -&gt; Set UID -&gt; Set UID
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`S.union`</span></span><span> </span><span class="annot"><span class="annottext">b p -&gt; Set UID
forall p. b p -&gt; Set UID
forall (f :: * -&gt; *) p. GHasCRefs f =&gt; f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">b p
</span><a href="#local-6989586621679106523"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-pragma hs-type">gChunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- Sums: Depends on variant</span><span>
</span><span id="line-132"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106357"><span id="local-6989586621679106358"><span class="hs-special">(</span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106357"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106358"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679106357"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:+:</span></span><span> </span><span class="annot"><a href="#local-6989586621679106358"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621679106531"><span class="annot"><span class="annottext">gChunkRefs :: forall p. (:+:) a b p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">gChunkRefs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">L1</span></span><span> </span><span id="local-6989586621679106533"><span class="annot"><span class="annottext">a p
</span><a href="#local-6989586621679106533"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a p -&gt; Set UID
forall p. a p -&gt; Set UID
forall (f :: * -&gt; *) p. GHasCRefs f =&gt; f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">a p
</span><a href="#local-6989586621679106533"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R1</span></span><span> </span><span id="local-6989586621679106535"><span class="annot"><span class="annottext">b p
</span><a href="#local-6989586621679106535"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b p -&gt; Set UID
forall p. b p -&gt; Set UID
forall (f :: * -&gt; *) p. GHasCRefs f =&gt; f p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var">gChunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">b p
</span><a href="#local-6989586621679106535"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-pragma hs-type">gChunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- Fields: Delegate</span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679106362"><span id="local-6989586621679106363"><span class="annot"><a href="Drasil.Database.Chunk.html#HasChunkRefs"><span class="hs-identifier hs-type">HasChunkRefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106362"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">K1</span></span><span> </span><span class="annot"><a href="#local-6989586621679106363"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679106362"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621679106540"><span class="annot"><span class="annottext">gChunkRefs :: forall p. K1 i c p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">gChunkRefs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">K1</span></span><span> </span><span id="local-6989586621679106542"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679106542"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">c -&gt; Set UID
forall a. HasChunkRefs a =&gt; a -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#chunkRefs"><span class="hs-identifier hs-var">chunkRefs</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679106542"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-pragma hs-type">gChunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- Unit: Nothing!</span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#GHasCRefs"><span class="hs-identifier hs-type">GHasCRefs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">U1</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621679106545"><span class="annot"><span class="annottext">gChunkRefs :: forall p. U1 p -&gt; Set UID
</span><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-identifier hs-var hs-var hs-var hs-var">gChunkRefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">U1 p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UID
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Drasil.Database.Chunk.html#gChunkRefs"><span class="hs-pragma hs-type">gChunkRefs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-146"></span></pre></body></html>